@using Microsoft.AspNetCore.Identity
@using PLDMS.Core.Entities
@inject UserManager<AppUser> UserManager

@{
    var user = await UserManager.GetUserAsync(User);
}

@functions{
    string NavClass(string controller)
    {
        var currentController = ViewContext.RouteData.Values["Controller"]?.ToString();
        return currentController == controller
            ? "bg-brand-red text-white shadow-md"
            : "text-gray-400 hover:text-white hover:bg-white/5";
    }
}

<aside class="w-64 bg-brand-dark text-white flex flex-col flex-shrink-0 transition-all duration-300">
    <div class="h-16 flex items-center px-8 border-b border-gray-700 bg-opacity-30">
        <span class="text-2xl font-bold tracking-tight text-white"><span class="text-brand-red">PLD</span> Admin</span>
    </div>

    <nav class="flex-1 px-4 py-6 space-y-2 overflow-y-auto">
        <a asp-area="Admin" asp-controller="Dashboard" asp-action="Index"
           class="@NavClass("Dashboard") flex items-center gap-3 px-4 py-3 rounded-lg transition-colors">
            <i class="ph ph-squares-four text-xl"></i>
            <span class="font-medium">Dashboard</span>
        </a>
        <a asp-area="Admin" asp-controller="Mentor" asp-action="Index"
           class="@NavClass("Mentor") flex items-center gap-3 px-4 py-3 rounded-lg transition-colors">
            <i class="ph ph-users text-xl"></i>
            <span class="font-medium">Mentors</span>
        </a>
        <a asp-area="Admin" asp-controller="Student" asp-action="Index"
           class="@NavClass("Student") flex items-center gap-3 px-4 py-3 rounded-lg transition-colors">
            <i class="ph ph-users text-xl"></i>
            <span class="font-medium">Students</span>
        </a>
        <a asp-area="Admin" asp-controller="Cohort" asp-action="Index"
           class="@NavClass("Cohort") flex items-center gap-3 px-4 py-3 rounded-lg transition-colors">
            <i class="ph ph-stack text-xl"></i>
            <span class="font-medium">Cohorts</span>
        </a>
        <a asp-area="Admin" asp-controller="Program" asp-action="Index"
           class="@NavClass("Program") flex items-center gap-3 px-4 py-3 rounded-lg transition-colors">
            <i class="ph ph-book-open text-xl"></i>
            <span class="font-medium">Programs</span>
        </a>
        <a asp-area="Admin" asp-controller="Report" asp-action="Index"
           class="@NavClass("Report") flex items-center gap-3 px-4 py-3 rounded-lg transition-colors">
            <i class="ph ph-chart-bar text-xl"></i>
            <span class="font-medium">Reports</span>
        </a>
    </nav>

    <div class="p-4 border-t border-gray-700">
        <div class="flex justify-between items-center gap-3">
            <div class="flex items-center gap-3">
                <img src="https://ui-avatars.com/api/?name=@(user.FullName)&background=E03C31&color=fff"
                     class="w-10 h-10 rounded-full border-2 border-brand-red">
                <div>
                    <p class="text-sm font-semibold text-white">@user.FullName</p>
                    <p class="text-xs text-gray-400">@user.Role</p>
                </div>
            </div>
            <form asp-area=""
                  asp-controller="Account"
                  asp-action="Logout"
                  method="post"
                  class="ml-auto">

                <button type="submit"
                        class="text-gray-400 hover:text-white">
                    <i class="ph ph-sign-out text-xl"></i>
                </button>
            </form>
        </div>
    </div>
</aside>